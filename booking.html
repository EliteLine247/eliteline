<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eliteline | Booking</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="images/circle_logo.png">

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- NEW GOOGLE MAPS LOADER (NO LEGACY) -->
  <script>
    window.initAutocomplete = function () {
      console.log("Google Maps API Loaded.");

      const fields = ["formatted_address", "geometry", "address_components"];
      const config = {
        componentRestrictions: { country: "gb" },
        fields,
      };

      function activate(id) {
        const el = document.getElementById(id);
        if (!el) return;
        new google.maps.places.Autocomplete(el, config);
      }

      activate("fromAddress");
      activate("toAddress");
      activate("otherPickup");
      activate("otherDropoff");
      activate("extraStopAddress");
    };

    (function loadGoogleMaps() {
      const script = document.createElement("script");
      script.src =
        "https://maps.googleapis.com/maps/api/js?key=AIzaSyDY_Ht1E_M8zy1_GqcnF5llzF-79umXES4&libraries=places&callback=initAutocomplete";
      script.async = true;
      script.defer = true;
      document.head.appendChild(script);
    })();
  </script>

</head>

<body>

<header>
  <nav class="navbar">
    <div class="container">
      <div class="logo">
        <a href="index.html">
          <img src="images/circle_logo.png" alt="Eliteline logo">
        </a>
      </div>

      <button class="menu-toggle" aria-label="Open Menu">
        <i class="fas fa-bars"></i>
        <span class="menu-text">Menu</span>
      </button>

      <ul class="nav-links">
        <li><a href="index.html">HOME</a></li>
        <li><a href="services.html">SERVICES</a></li>
        <li><a href="prices.html">PRICE</a></li>
        <li><a href="about_us.html">ABOUT US</a></li>
        <li><a href="booking.html" class="active">BOOKING</a></li>
        <li><a href="terms_conditions.html">TERMS & <br> CONDITIONS</a></li>
      </ul>

      <div class="social-icons">
        <a href="https://www.facebook.com/profile.php?id=61567137089321" target="_blank" class="facebook-icon">
          <i class="fab fa-facebook-f"></i>
        </a>

        <a href="https://www.instagram.com/elitelineofficial/" target="_blank" class="instagram-icon">
          <i class="fab fa-instagram"></i>
        </a>

        <a href="https://wa.me/447340868719" target="_blank" class="whatsapp-icon">
          <i class="fab fa-whatsapp"></i>
        </a>
      </div>
    </div>
  </nav>
</header>

<br><br><br><br><br>

<section class="curved-section booking-section">
  <h2>Book Your Chauffeur</h2>

  <form id="bookingForm" class="enquiry-form">

    <!-- TRIP TYPE -->
    <div class="trip-tabs">
      <button type="button" class="trip-tab active" data-mode="one_way">One Way</button>
      <button type="button" class="trip-tab" data-mode="return">Return</button>
      <button type="button" class="trip-tab" data-mode="wait_return">Wait & Return</button>
      <button type="button" class="trip-tab" data-mode="hourly">By The Hour</button>
    </div>
    <input type="hidden" id="tripType" name="tripType" value="one_way">

    <!-- CAR CLASS -->
    <div class="car-class-buttons">
      <button type="button" class="car-btn active" data-car="business">Business Class</button>
      <button type="button" class="car-btn" data-car="first">First Class</button>
      <button type="button" class="car-btn" data-car="xl">Business XL</button>
    </div>
    <input type="hidden" name="vehicle" id="vehicle" value="business">

    <!-- FROM / TO -->
    <div id="fromToRow" class="from-to-row">

      <!-- FROM -->
      <div class="from-to-col">
        <div class="from-to-label">From:</div>

        <div class="from-to-toggle">
          <button type="button" class="from-btn active" data-from="fixed">Fixed Fare</button>
          <button type="button" class="from-btn" data-from="address">Address</button>
        </div>

        <div id="fromFixedWrapper" class="premium-select">
          <select id="fromFixedFare" name="fromFixedFare">
            <option value="">Select a fixed fare *</option>
            <optgroup label="Airports">
              <option value="LHR">London Heathrow Airport (LHR)</option>
              <option value="LGW">London Gatwick Airport (LGW)</option>
              <option value="STN">London Stansted Airport (STN)</option>
              <option value="SOU">Southampton Airport (SOU)</option>
              <option value="LTN">London Luton Airport (LTN)</option>
              <option value="BOH">Bournemouth Airport (BOH)</option>
              <option value="LCY">London City Airport (LCY)</option>
              <option value="BQH">London Biggin Hill Airport (BQH)</option>
              <option value="FAB">Farnborough Airport (FAB)</option>
            </optgroup>
            <optgroup label="Cities">
              <option value="BRIGHTON_HOVE">Brighton & Hove</option>
              <option value="PORTSMOUTH">Portsmouth</option>
              <option value="SOUTHAMPTON_CITY">Southampton</option>
              <option value="GUILDFORD">Guildford</option>
              <option value="LONDON_CENTRAL">Central London</option>
            </optgroup>
          </select>
        </div>

        <div id="fromAddressWrapper" class="address-wrapper" style="display:none;">
          <input class="premium-input" type="text" id="fromAddress" placeholder="From address *">
        </div>
      </div>

      <!-- TO -->
      <div class="from-to-col">
        <div class="from-to-label">To:</div>

        <div class="from-to-toggle">
          <button type="button" class="to-btn active" data-to="fixed">Fixed Fare</button>
          <button type="button" class="to-btn" data-to="address">Address</button>
        </div>

        <div id="toFixedWrapper" class="premium-select">
          <select id="toFixedFare" name="toFixedFare">
            <option value="">Select a fixed fare *</option>
            <optgroup label="Airports">
              <option value="LHR">London Heathrow Airport (LHR)</option>
              <option value="LGW">London Gatwick Airport (LGW)</option>
              <option value="STN">London Stansted Airport (STN)</option>
              <option value="SOU">Southampton Airport (SOU)</option>
              <option value="LTN">London Luton Airport (LTN)</option>
              <option value="BOH">Bournemouth Airport (BOH)</option>
              <option value="LCY">London City Airport (LCY)</option>
              <option value="BQH">London Biggin Hill Airport (BQH)</option>
              <option value="FAB">Farnborough Airport (FAB)</option>
            </optgroup>
            <optgroup label="Cities">
              <option value="BRIGHTON_HOVE">Brighton & Hove</option>
              <option value="PORTSMOUTH">Portsmouth</option>
              <option value="SOUTHAMPTON_CITY">Southampton</option>
              <option value="GUILDFORD">Guildford</option>
              <option value="LONDON_CENTRAL">Central London</option>
            </optgroup>
          </select>
        </div>

        <div id="toAddressWrapper" class="address-wrapper" style="display:none;">
          <input class="premium-input" type="text" id="toAddress" placeholder="To address *">
        </div>
      </div>

    </div>

    <!-- HOURLY -->
    <div id="otherAddressWrapper" style="display:none;">
      <input class="premium-input" type="text" id="otherPickup" placeholder="Pickup location *">
      <input class="premium-input" type="text" id="otherDropoff" placeholder="Drop-off location *">
    </div>

    <!-- PASSENGER -->
    <input class="premium-input" type="text" name="fullName" placeholder="Full Name *" required>

    <div class="form-row">
      <input class="premium-input" type="tel" name="phone" placeholder="Phone Number *" required>
      <input class="premium-input" type="email" name="email" placeholder="Email Address *" required>
    </div>

    <!-- DATE -->
    <div class="form-row">
      <div class="input-box">
        <label>Date</label>
        <input type="date" id="date" name="date" class="premium-input" required>
      </div>
      <div class="input-box">
        <label>Time</label>
        <input type="time" id="time" name="time" class="premium-input" required>
      </div>
    </div>

    <!-- RETURN FIELDS -->
    <div id="returnFields" style="display:none;">
      <h4 style="text-align:center;margin:10px 0;">Return Journey Details</h4>
      <div class="form-row">
        <div class="input-box">
          <label>Return Date</label>
          <input type="date" id="returnDate" name="returnDate" class="premium-input">
        </div>
        <div class="input-box">
          <label>Return Time</label>
          <input type="time" id="returnTime" name="returnTime" class="premium-input">
        </div>
      </div>
    </div>

    <!-- WAIT HOURS -->
    <div id="waitHoursWrapper" class="premium-select" style="display:none;">
      <label>How many hours should the driver wait?</label>
      <select id="waitHours" name="waitHours">
        <option value="">Select hours *</option>
        <option value="1">1 hour</option>
        <option value="2">2 hours</option>
        <option value="3">3 hours</option>
        <option value="4">4 hours</option>
        <option value="5">5 hours</option>
        <option value="6">6 hours</option>
      </select>
    </div>

    <!-- AIRPORT EXTRAS -->
    <div id="airportExtras" class="form-row" style="display:none;">
      <div class="input-box">
        <label>Terminal</label>
        <input type="text" id="terminal" name="terminal" class="premium-input" placeholder="Terminal">
      </div>
      <div class="input-box">
        <label>Flight Number</label>
        <input type="text" id="flightNumber" name="flightNumber" class="premium-input" placeholder="Flight Number">
      </div>
    </div>

    <!-- EXTRA STOPS -->
    <fieldset class="extras-fieldset">
      <label class="pill">
        <input type="checkbox" id="childSeat" name="childSeat" value="yes">
        <span>Child Seat</span>
      </label>
      <label class="pill">
        <input type="checkbox" id="extraStops" name="extraStops" value="yes">
        <span>Extra Stop(s)</span>
      </label>
    </fieldset>

    <div id="extraStopAddressWrapper" style="display:none;">
      <input class="premium-input" type="text" id="extraStopAddress" name="extraStopAddress" placeholder="Enter stop address *">
    </div>

    <!-- SUBMIT -->
    <button type="submit" class="submit-btn">Proceed to Payment</button>

    <!-- Hidden fields -->
    <input type="hidden" id="pickup" name="pickup">
    <input type="hidden" id="dropoff" name="dropoff">
    <input type="hidden" id="airportCode" name="airportCode">
    <input type="hidden" id="direction" name="direction">

  </form>
</section>

<script>
/* ============================================================
   MAIN LOGIC
============================================================ */
(function () {

  const form = document.getElementById("bookingForm");

  const tripTabs = document.querySelectorAll(".trip-tab");
  const tripTypeInput = document.getElementById("tripType");

  const returnFields = document.getElementById("returnFields");
  const waitHoursWrapper = document.getElementById("waitHoursWrapper");
  const hourlyWrapper = document.getElementById("hourlyWrapper");
  const airportExtras = document.getElementById("airportExtras");

  const fromToRow = document.getElementById("fromToRow");
  const otherAddressWrapper = document.getElementById("otherAddressWrapper");

  const otherPickupInput = document.getElementById("otherPickup");
  const otherDropoffInput = document.getElementById("otherDropoff");

  /* CAR CLASS */
  const carButtons = document.querySelectorAll(".car-btn");
  const vehicleInput = document.getElementById("vehicle");
  const hoursInput = document.getElementById("hours");

  function updateHourlyMinHours() {
    if (!hoursInput) return;
    if (vehicleInput.value === "business") hoursInput.min = 4;
    else hoursInput.min = 5;
  }

  carButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      carButtons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      vehicleInput.value = btn.dataset.car;
      updateHourlyMinHours();
    });
  });

  updateHourlyMinHours();

  /* FIXED / ADDRESS TOGGLE */
  const fromButtons = document.querySelectorAll(".from-btn");
  const toButtons = document.querySelectorAll(".to-btn");

  const fromFixedWrapper = document.getElementById("fromFixedWrapper");
  const toFixedWrapper = document.getElementById("toFixedWrapper");

  const fromAddressWrapper = document.getElementById("fromAddressWrapper");
  const toAddressWrapper = document.getElementById("toAddressWrapper");

  const fromFixedSelect = document.getElementById("fromFixedFare");
  const toFixedSelect = document.getElementById("toFixedFare");

  const AIRPORT_CODES = ["LHR","LGW","STN","SOU","LTN","BOH","LCY","BQH","FAB"];

  function updateAirportExtrasVisibility() {
    if (tripTypeInput.value === "hourly") {
      airportExtras.style.display = "none";
      return;
    }

    const fromCode = fromFixedSelect.value;
    const toCode = toFixedSelect.value;

    const show =
      AIRPORT_CODES.includes(fromCode) ||
      AIRPORT_CODES.includes(toCode);

    airportExtras.style.display = show ? "flex" : "none";
  }

  function setFromType(type) {
    fromButtons.forEach(b => b.classList.toggle("active", b.dataset.from === type));
    fromFixedWrapper.style.display = type === "fixed" ? "block" : "none";
    fromAddressWrapper.style.display = type === "address" ? "block" : "none";
    updateAirportExtrasVisibility();
  }

  function setToType(type) {
    toButtons.forEach(b => b.classList.toggle("active", b.dataset.to === type));
    toFixedWrapper.style.display = type === "fixed" ? "block" : "none";
    toAddressWrapper.style.display = type === "address" ? "block" : "none";
    updateAirportExtrasVisibility();
  }

  fromButtons.forEach(btn =>
    btn.addEventListener("click", () => setFromType(btn.dataset.from))
  );
  toButtons.forEach(btn =>
    btn.addEventListener("click", () => setToType(btn.dataset.to))
  );

  fromFixedSelect.addEventListener("change", updateAirportExtrasVisibility);
  toFixedSelect.addEventListener("change", updateAirportExtrasVisibility);

  setFromType("fixed");
  setToType("fixed");

  /* TRIP TYPE */
  function setTrip(mode) {
    tripTypeInput.value = mode;

    tripTabs.forEach(b => b.classList.toggle("active", b.dataset.mode === mode));

    returnFields.style.display = mode === "return" ? "block" : "none";
    waitHoursWrapper.style.display = mode === "wait_return" ? "block" : "none";
    hourlyWrapper.style.display = mode === "hourly" ? "block" : "none";

    if (mode === "hourly") {
      fromToRow.style.display = "none";
      otherAddressWrapper.style.display = "block";
      otherDropoffInput.style.display = "none";
    } else {
      fromToRow.style.display = "flex";
      otherAddressWrapper.style.display = "none";
      otherDropoffInput.style.display = "block";
    }

    updateAirportExtrasVisibility();
  }

  tripTabs.forEach(btn =>
    btn.addEventListener("click", () => setTrip(btn.dataset.mode))
  );

  setTrip("one_way");

  /* EXTRA STOP */
  const extraStopsCheckbox = document.getElementById("extraStops");
  const extraStopAddressWrapper = document.getElementById("extraStopAddressWrapper");

  extraStopsCheckbox.addEventListener("change", () => {
    extraStopAddressWrapper.style.display = extraStopsCheckbox.checked ? "block" : "none";
  });

  /* FORM SUBMISSION */
  const pickupHidden = document.getElementById("pickup");
  const dropoffHidden = document.getElementById("dropoff");
  const airportCodeHidden = document.getElementById("airportCode");
  const directionHidden = document.getElementById("direction");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const tripType = tripTypeInput.value;

    let pickup = "";
    let dropoff = "";
    let airportCode = "";
    let direction = "";

    if (tripType === "hourly") {
      pickup = (otherPickupInput.value || "").trim();
      dropoff = "";
      direction = "HOURLY";
    } else {
      const fromCode = fromFixedSelect.value;
      const toCode = toFixedSelect.value;

      pickup = fromFixedWrapper.style.display !== "none"
        ? fromFixedSelect.options[fromFixedSelect.selectedIndex].text
        : fromAddressWrapper.querySelector("input").value;

      dropoff = toFixedWrapper.style.display !== "none"
        ? toFixedSelect.options[toFixedSelect.selectedIndex].text
        : toAddressWrapper.querySelector("input").value;

      const fromIsAirport = AIRPORT_CODES.includes(fromCode);
      const toIsAirport = AIRPORT_CODES.includes(toCode);

      if (fromIsAirport) airportCode = fromCode;
      else if (toIsAirport) airportCode = toCode;

      if (fromIsAirport && !toIsAirport) direction = "AIRPORT_TO_ADDRESS";
      else if (!fromIsAirport && toIsAirport) direction = "ADDRESS_TO_AIRPORT";
      else if (fromIsAirport && toIsAirport) direction = "AIRPORT_TO_AIRPORT";
      else direction = "OTHER";
    }

    pickupHidden.value = pickup;
    dropoffHidden.value = dropoff;
    airportCodeHidden.value = airportCode;
    directionHidden.value = direction;

    alert("Form submission logic here. Replace with your API call.");
  });

})();
</script>

<footer>
  <p>
    Copyright All Rights Reserved Â© 2025 |
    Eliteline, Chichester District Council. Operator's Licence Number: 381, United Kingdom.
    Company Registration Number: 16871447
    <a href="privacy_policy.html" style="color:#000;">Privacy Policy</a>
  </p>
</footer>

<!-- AOS Animation -->
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>AOS.init();</script>

<!-- Header scroll behavior -->
<script>
document.addEventListener("scroll", function () {
  const header = document.querySelector("header");
  header.style.top = window.scrollY > 50 ? "0" : "-100px";
});
</script>

<!-- Mobile menu -->
<script>
document.querySelector(".menu-toggle").addEventListener("click", function () {
  document.querySelector(".nav-links").classList.toggle("active");
});
</script>

</body>
</html>
